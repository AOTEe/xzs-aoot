<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mindskip.xzs.video_room.repository.DanmuMapper">
  <resultMap id="BaseResultMap" type="com.mindskip.xzs.video_room.bean.Danmu">
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="send_time" jdbcType="VARCHAR" property="sendTime" />
    <result column="text" jdbcType="VARCHAR" property="text" />
    <result column="color" jdbcType="VARCHAR" property="color" />
    <result column="force" jdbcType="TINYINT" property="force" />
    <result column="time" jdbcType="VARCHAR" property="time" />
    <result column="type" jdbcType="VARCHAR" property="type" />
    <result column="video_id" jdbcType="VARCHAR" property="videoId" />
    <result column="sender_id" jdbcType="VARCHAR" property="senderId" />
  </resultMap>
  <sql id="Base_Column_List">
    id, send_time, text, color, force, `time`, `type`,video_id, sender_id
  </sql>

  <insert id="post" parameterType="com.mindskip.xzs.video_room.bean.Danmu" keyProperty="id">
    insert into t_danmu
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="sendTime != null">
        send_time,
      </if>
      <if test="text != null">
        text,
      </if>
      <if test="color != null">
        color,
      </if>
      <if test="force != null">
        `force`,
      </if>
      <if test="time != null">
        `time`,
      </if>
      <if test="type != null">
        `type`,
      </if>
      <if test="videoId != null">
        video_id,
      </if>
      <if test="senderId != null">
        sender_id,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="sendTime != null">
        #{sendTime,jdbcType=VARCHAR},
      </if>
      <if test="text != null">
        #{text,jdbcType=VARCHAR},
      </if>
      <if test="color != null">
        #{color,jdbcType=VARCHAR},
      </if>
      <if test="force != null">
        #{force,jdbcType=TINYINT},
      </if>
      <if test="time != null">
        #{time,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="videoId != null">
        #{videoId,jdbcType=VARCHAR},
      </if>
      <if test="senderId != null">
        #{senderId,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  
  <select id="getDanmuListByVideoId" resultMap="BaseResultMap">
    select  id, send_time, text, color, `force`, `time`, `type`,video_id, sender_id from t_danmu
    where video_id = #{videoId}
  </select>




</mapper>
